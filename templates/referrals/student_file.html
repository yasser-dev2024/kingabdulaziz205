{% load static %}
<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ملف الطالب</title>
  <style>
    :root{--txt:#0f172a;--bg:#f8fafc;--line:rgba(0,0,0,.08)}
    body{margin:0;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Tajawal,Arial;color:var(--txt)}
    .wrap{max-width:1100px;margin:auto;padding:18px 16px}
    .card{background:#fff;border:1px solid var(--line);border-radius:18px;padding:16px}
    .grid{display:grid;gap:12px}
    .grid-2{grid-template-columns:1fr}
    @media(min-width:980px){ .grid-2{grid-template-columns: 1fr 1fr;} }
    .pill{display:inline-flex;gap:8px;padding:6px 10px;border:1px dashed var(--line);border-radius:999px;background:linear-gradient(180deg,#fff,#f8fafc)}
    .muted{color:#64748b;font-size:13px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1px solid rgba(0,0,0,.16);border-radius:12px;text-decoration:none;background:#fff}
  </style>
</head>
<body>
  {% include 'header.html' %}
  <div class="wrap">
    <div class="card">
      <h2 style="margin:0">ملف الطالب</h2>
      <div class="pill" style="margin-top:8px">
        <b>الاسم:</b> {{ student_name|default:"(غير محدد)" }}
        <span class="muted">• مفتاح: {{ key }}</span>
      </div>
    </div>

    <div class="grid grid-2" style="margin-top:12px">
      {% for r in items %}
        <div class="card">
          <div style="font-weight:700;margin-bottom:6px">
            {{ r.reference }} — {{ r.get_status_display }}
          </div>
          <div class="muted" style="margin-bottom:8px">
            الصف: {{ r.get_grade_display }} • النوع: {{ r.get_referral_type_display }}
          </div>
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <a class="btn" href="{% url 'referrals:detail' r.pk %}">تفاصيل الإحالة</a>
          </div>
        </div>
      {% empty %}
        <div class="card">لا توجد إحالات لهذا الطالب.</div>
      {% endfor %}
    </div>
  </div>
  {% include 'footer.html' %}
</body>
</html>
